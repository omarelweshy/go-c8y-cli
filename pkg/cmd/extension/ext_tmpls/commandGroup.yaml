# yaml-language-server: $schema=https://raw.githubusercontent.com/reubenmiller/go-c8y-cli/feat/extensions-manager/tools/schema/extensionCommands.json
---
group:
  name: features
  description: Example features

commands:
  - name: list
    description: Simple get command
    descriptionLong: |
      Some more detailed instructions on how to use the command

      It can also use come additional context
    method: GET
    path: inventory/managedObjects
    queryParameters:
      - name: query
        property: q
        type: queryExpression
        description: Query expression
        children:
          - name: name
            type: string
            description: Filter by name
            format: (name eq '%s')
          
          - name: orderBy
            type: string
            default: name
            description: Order by. e.g. _id asc or name asc or creationTime.date desc

  - name: get
    description: Get profile
    descriptionLong: Get the profile with the given configurationId
    method: GET
    path: service/oee-bundle/configurationmanager/2/configuration/{id}
    pathParameters:
      - name: id
        type: string
        description: Profile/Configuration id
        pipeline: true

  - name: delete
    description: Delete profile
    method: DELETE
    path: service/oee-bundle/configurationmanager/2/configuration/{id}
    pathParameters:
      - name: id
        type: string
        description: Profile/Configuration id
        pipeline: true

  - name: create
    description: Create object
    descriptionLong: |
      Some more detailed instructions on how to use the command

      It can also use come additional context.
    method: POST
    path: inventory/managedObjects
    exampleList:
      - command: |
          c8y oee create --template "{one: 1}"
        description: Create a new managed object using a template

      - command: c8y oee list
        description: Create a new managed object
    body:
      - name: name
        type: string
        description: Name
        pipeline: true
      
      - name: time
        type: datetime
        description: Timestamp (ISO-8601 format). Supports fixed or relative time

      - name: day
        type: date
        description: Date (without time, e.g. 2023-04-23). Supports fixed or relative time

      - name: type
        type: string
        description: Type
        validationSet:
          - example1
          - example2

    bodyTemplates:
      - type: jsonnet
        template: "{example: true}"

  - name: update
    description: Update object
    descriptionLong: Update
    method: PUT
    path: inventory/managedObjects/{id}
    pathParameters:
      - name: id
        type: string
        description: Managed object id
        pipeline: true
    body:
      - name: name
        type: string
        description: Profile name
        required: true

  - name: hidden
    description: Hidden command
    descriptionLong: |
      Hidden commands don't appear in the list of commands, however you can still
      use them as normal, and also get help about it if you know what the command is.
    exampleList:
      - command: c8y oee features hidden --help
        description: Show help for the hidden command
    hidden: true
    path: something/secret
    method: POST
