{
  "information": {
    "name": "devices/software",
    "description": "Cumulocity device software",
    "descriptionLong": "Managed device software (introduced in 10.15)",
    "link": "https://cumulocity.com/guides/reference/device-management-library/#advanced-software-management"
  },
  "endpoints": [
    {
      "name": "findSoftware",
      "method": "GET",
      "description": "Find software",
      "descriptionLong": "Find software packages for a device",
      "path": "service/advanced-software-mgmt/software",
      "accept": "application/vnd.com.nsn.cumulocity.managedObjectReferenceCollection+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.customDeviceSoftware+json",
      "collectionProperty": "softwareList",
      "alias": {
        "go": "list",
        "powershell": "Find-DeviceSoftwareCollection"
      },
      "examples": {
        "powershell": [
          {
            "description": "Find all software (from a device)",
            "command": "Find-DeviceSoftwareCollection -Id 12345",
            "skipTest": true
          }
        ],
        "go": [
          {
            "description": "Find all software (from a device)",
            "command": "c8y devices software list --device 12345"
          },
          {
            "description": "Find any software matching ssh*",
            "command": "c8y devices software list --device 12345 --name \"ssh*\""
          },
          {
            "description": "Find software matching the name 'ssh' and version '2.0.0'",
            "command": "c8y devices software list --device 12345 --name ssh --version 2.0.0"
          }
        ]
      },
      "queryParameters": [
        {
          "name": "device",
          "property": "deviceId",
          "type": "[]device",
          "pipeline": true,
          "description": "Device"
        },
        {
          "name": "name",
          "type": "string",
          "description": "Software name"
        },
        {
          "name": "version",
          "type": "string",
          "description": "Software version"
        },
        {
          "name": "type",
          "type": "string",
          "description": "Software type"
        }
      ]
    },
    {
      "name": "setSoftware",
      "method": "POST",
      "path": "service/advanced-software-mgmt/software",
      "accept": "application/json",
      "contentType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "description": "Set/replace software list",
      "descriptionLong": "Set/replace a list of software for a device",
      "alias": {
        "go": "set",
        "powershell": "Set-DeviceSoftware"
      },
      "examples": {
        "powershell": [
          {
            "description": "Set/replace the list of software on a device",
            "command": "Set-DeviceSoftware -Device $software.id -Name ntp -Version 1.0.2 -Type apt",
            "skipTest": true
          }
        ],
        "go": [
          {
            "description": "Set/replace the list of software on a device",
            "command": "c8y devices software set --device 12345 --name ntp --version 1.0.2 --type apt",
            "assertStdOut": {
              "json": {
                "path": "r/service/advanced-software-mgmt/software$",
                "body.0.name": "ntp",
                "body.0.version": "1.0.2",
                "body.0.type": "apt"
              }
            }
          }
        ]
      },
      "queryParameters": [
        {
          "name": "device",
          "property": "deviceId",
          "type": "[]device",
          "pipeline": true,
          "description": "Device"
        }
      ],
      "bodyContent": {
        "type": "json_array"
      },
      "body": [
        {
          "name": "name",
          "type": "string",
          "property": "0.name",
          "description": "Software name"
        },
        {
          "name": "version",
          "type": "string",
          "property": "0.version",
          "description": "Software version"
        },
        {
          "name": "url",
          "type": "string",
          "property": "0.url",
          "description": "Software url"
        },
        {
          "name": "type",
          "type": "string",
          "property": "0.softwareType",
          "description": "Software type, e.g. apt"
        },
        {
          "name": "data",
          "type": "json",
          "description": "Additional properties."
        }
      ],
      "bodyRequiredKeys": [
        "0.name"
      ]
    },
    {
      "name": "add",
      "method": "PUT",
      "path": "service/advanced-software-mgmt/software",
      "accept": "application/json",
      "contentType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "description": "Add software package",
      "descriptionLong": "Add software packages to a device",
      "alias": {
        "go": "add",
        "powershell": "Add-DeviceSoftware"
      },
      "examples": {
        "powershell": [
          {
            "description": "Add software to a device",
            "command": "Add-DeviceSoftware -Device 12345 -Name myapp -Version 1.0.2",
            "skipTest": true
          }
        ],
        "go": [
          {
            "description": "Add software to a device",
            "command": "c8y devices software add --device 12345 --name myapp --version 1.0.2"
          },
          {
            "description": "Add software to multiple devices (using pipeline)",
            "command": "c8y devices list | c8y devices software add --name myapp --version 1.0.2",
            "skipTest": true
          }
        ]
      },
      "queryParameters": [
        {
          "name": "device",
          "property": "deviceId",
          "type": "[]device",
          "description": "Device"
        }
      ],
      "bodyContent": {
        "type": "json_array"
      },
      "body": [
        {
          "name": "name",
          "type": "string",
          "property": "0.name",
          "description": "Software name"
        },
        {
          "name": "version",
          "type": "string",
          "property": "0.version",
          "description": "Software version"
        },
        {
          "name": "url",
          "type": "string",
          "property": "0.url",
          "description": "Software url"
        },
        {
          "name": "type",
          "type": "string",
          "property": "0.softwareType",
          "description": "Software type, e.g. apt"
        },
        {
          "name": "data",
          "type": "json",
          "description": "Additional properties."
        }
      ]
    },
    {
      "name": "delete",
      "method": "DELETE",
      "path": "service/advanced-software-mgmt/software",
      "accept": "application/json",
      "contentType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "collectionType": "application/vnd.com.nsn.cumulocity.managedObject+json",
      "description": "Delete software",
      "descriptionLong": "Delete an existing software item from a device. This does not send an operation,\nit just modifies the cloud digital twin.\n\nFor a software package to be deleted it must match both the name and version, and patterns\nare not supported.\n",
      "alias": {
        "go": "delete",
        "powershell": "Remove-DeviceSoftware"
      },
      "examples": {
        "powershell": [
          {
            "description": "Remove software",
            "command": "Remove-DeviceSoftware -Id 12345 -Name ntp -Version 1.0.0",
            "skipTest": true
          }
        ],
        "go": [
          {
            "description": "Remove software",
            "command": "c8y devices software delete --device 22222 --name ntp --version 1.0.0",
            "skipTest": true
          },
          {
            "description": "Remove software from a list of devices (using pipeline)",
            "command": "c8y devices list | c8y devices software delete --name \"myapp\" --version 2.0.0",
            "skipTest": true
          }
        ]
      },
      "queryParameters": [
        {
          "name": "device",
          "property": "deviceId",
          "type": "[]device",
          "pipeline": true,
          "description": "Device"
        }
      ],
      "bodyContent": {
        "type": "json_array"
      },
      "body": [
        {
          "name": "name",
          "property": "0.name",
          "type": "string",
          "description": "Software name"
        },
        {
          "name": "version",
          "property": "0.version",
          "type": "string",
          "description": "Software version"
        },
        {
          "name": "data",
          "type": "json",
          "description": "Additional properties."
        }
      ],
      "bodyRequiredKeys": [
        "0.name",
        "0.version"
      ]
    }
  ]
}
